<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Go 语言基础学习笔记 | SimulatedSakura</title><meta name="description" content="GO 语言课程链接： Golang 环境安装链接[国内镜像]: https:&#x2F;&#x2F;studygolang.com&#x2F;dl 安装: 如果以 WINDOWS 版本为例 直接 next 即可 最后使用 go version 指令检查版本即可 ​                      Liunx下使用以下解压指令，配置环境变量即可 1234567891011解压命令sudo tsr -zxvf 包名.ta"><meta name="keywords" content="Go, 基础"><meta name="author" content="SimulatedSakura"><meta name="copyright" content="SimulatedSakura"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://yoursite.com/posts/58401/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="Go 语言基础学习笔记"><meta property="og:url" content="http://yoursite.com/posts/58401/"><meta property="og:site_name" content="SimulatedSakura"><meta property="og:description" content="GO 语言课程链接： Golang 环境安装链接[国内镜像]: https:&#x2F;&#x2F;studygolang.com&#x2F;dl 安装: 如果以 WINDOWS 版本为例 直接 next 即可 最后使用 go version 指令检查版本即可 ​                      Liunx下使用以下解压指令，配置环境变量即可 1234567891011解压命令sudo tsr -zxvf 包名.ta"><meta property="og:image" content="https://s2.loli.net/2022/09/10/vVYzpIRW4uwioGZ.png"><meta property="article:published_time" content="2022-08-29T04:36:05.000Z"><meta property="article:modified_time" content="2022-09-10T12:20:43.315Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="prev" title="Vim 相关" href="http://yoursite.com/posts/1699/"><link rel="next" title="Java线程学习" href="http://yoursite.com/posts/41145/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2022-09-10 20:20:43'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://s2.loli.net/2022/08/23/L8w9ATnFKUIYgCH.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">6</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/box/"><i class="fa-fw fab fa-xbox"></i><span> 聚宝盒</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw far fa-comment"></i><span> 微语</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#GO-语言"><span class="toc-number">1.</span> <span class="toc-text">GO 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang-环境安装"><span class="toc-number">1.1.</span> <span class="toc-text">Golang 环境安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang-课程序言"><span class="toc-number">1.2.</span> <span class="toc-text">Golang 课程序言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang的优势"><span class="toc-number">1.2.1.</span> <span class="toc-text">Golang的优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang的强项"><span class="toc-number">1.2.2.</span> <span class="toc-text">Golang的强项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang的明星作品（成就）"><span class="toc-number">1.2.3.</span> <span class="toc-text">Golang的明星作品（成就）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang-的不足"><span class="toc-number">1.2.4.</span> <span class="toc-text">Golang 的不足</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang-语法新奇"><span class="toc-number">1.3.</span> <span class="toc-text">Golang 语法新奇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量"><span class="toc-number">1.3.1.</span> <span class="toc-text">变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#从一个main函数-初见-Go-语法特性"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">从一个main函数 初见 Go 语法特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常见的四种变量声明方式与多变量声明方式"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">常见的四种变量声明方式与多变量声明方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#const-与-iota"><span class="toc-number">1.3.2.</span> <span class="toc-text">const 与 iota</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-number">1.3.3.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#多返回值"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">多返回值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#init函数与import导包"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">init函数与import导包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#import-匿名及别名导包方式"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">import 匿名及别名导包方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指针"><span class="toc-number">1.3.4.</span> <span class="toc-text">指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defer关键字-语句调用顺序"><span class="toc-number">1.3.5.</span> <span class="toc-text">defer关键字 语句调用顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组与动态数组（切片-slice）"><span class="toc-number">1.3.6.</span> <span class="toc-text">数组与动态数组（切片 slice）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#常规数组"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">常规数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#动态数组（切片-slice）"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">动态数组（切片 slice）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#slice-切片的-4-种声明定义方式"><span class="toc-number">1.3.6.3.</span> <span class="toc-text">slice 切片的 4 种声明定义方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#slice-切片追加与截取"><span class="toc-number">1.3.6.4.</span> <span class="toc-text">slice 切片追加与截取</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#追加"><span class="toc-number">1.3.6.4.1.</span> <span class="toc-text">追加:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#截取"><span class="toc-number">1.3.6.4.2.</span> <span class="toc-text">截取:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map"><span class="toc-number">1.3.7.</span> <span class="toc-text">map</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#声明方式"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">声明方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map的使用方式"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">map的使用方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#struct"><span class="toc-number">1.3.8.</span> <span class="toc-text">struct</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#结构体"><span class="toc-number">1.3.8.1.</span> <span class="toc-text">结构体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#面向对象类的表示和封装"><span class="toc-number">1.3.8.2.</span> <span class="toc-text">面向对象类的表示和封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Golang中面向对象继承"><span class="toc-number">1.3.8.3.</span> <span class="toc-text">Golang中面向对象继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多态（接口-interface）"><span class="toc-number">1.3.8.4.</span> <span class="toc-text">多态（接口 interface）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#接口得基础用法"><span class="toc-number">1.3.8.5.</span> <span class="toc-text">接口得基础用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#空接口万能类型与类型断言机制"><span class="toc-number">1.3.8.6.</span> <span class="toc-text">空接口万能类型与类型断言机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#反射"><span class="toc-number">1.3.9.</span> <span class="toc-text">反射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#为什么断言可以进行呢，这得看-go-语言的内部变量构造："><span class="toc-number">1.3.9.1.</span> <span class="toc-text">为什么断言可以进行呢，这得看 go 语言的内部变量构造：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#变量的pair可以从以下两个例子看出来"><span class="toc-number">1.3.9.2.</span> <span class="toc-text">变量的pair可以从以下两个例子看出来</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反射与-reflect-机制用法"><span class="toc-number">1.3.9.3.</span> <span class="toc-text">反射与 reflect 机制用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#结构体标签"><span class="toc-number">1.3.9.4.</span> <span class="toc-text">结构体标签</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#基础用法"><span class="toc-number">1.3.9.4.1.</span> <span class="toc-text">基础用法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在json中的应用"><span class="toc-number">1.3.9.4.2.</span> <span class="toc-text">在json中的应用</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang-高级"><span class="toc-number">1.4.</span> <span class="toc-text">Golang 高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Goroutine"><span class="toc-number">1.4.1.</span> <span class="toc-text">Goroutine</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#一、线程基础"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">一、线程基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二、协程的由来"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">二、协程的由来</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#三、Golang-对协程的处理"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">三、Golang 对协程的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#历史课"><span class="toc-number">1.4.1.3.1.</span> <span class="toc-text">历史课:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#弊端"><span class="toc-number">1.4.1.3.2.</span> <span class="toc-text">弊端:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#GMP模型："><span class="toc-number">1.4.1.3.3.</span> <span class="toc-text">GMP模型：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#调度器的设计策略"><span class="toc-number">1.4.1.3.4.</span> <span class="toc-text">调度器的设计策略</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建Goroutine"><span class="toc-number">1.4.1.3.5.</span> <span class="toc-text">创建Goroutine</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Channel-两个Goroutine之间的通信方式"><span class="toc-number">1.4.2.</span> <span class="toc-text">Channel(两个Goroutine之间的通信方式)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基本定义和使用"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">基本定义和使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#channel-的关闭"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">channel 的关闭</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#channel-与-range"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">channel 与 range</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#channel-与-select"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">channel 与 select</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Go-Modules-模块管理"><span class="toc-number">1.5.</span> <span class="toc-text">Go Modules 模块管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GOPATH-工作模式的弊端"><span class="toc-number">1.5.1.</span> <span class="toc-text">GOPATH 工作模式的弊端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Go-Modules-模式基础环境说明"><span class="toc-number">1.5.2.</span> <span class="toc-text">Go Modules 模式基础环境说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Go-Modules初始化项目"><span class="toc-number">1.5.3.</span> <span class="toc-text">Go Modules初始化项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang-即时通讯系统"><span class="toc-number">1.6.</span> <span class="toc-text">Golang 即时通讯系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#服务端"><span class="toc-number">1.6.1.</span> <span class="toc-text">服务端</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#server-go"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">server.go</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#user-go"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">user.go</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#main-go"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">main.go</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#客户端"><span class="toc-number">1.6.2.</span> <span class="toc-text">客户端</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#client-go"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">client.go</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://s2.loli.net/2022/09/10/vVYzpIRW4uwioGZ.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">SimulatedSakura</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/box/"><i class="fa-fw fab fa-xbox"></i><span> 聚宝盒</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw far fa-comment"></i><span> 微语</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Go 语言基础学习笔记</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2022-08-29 12:36:05"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2022-08-29</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2022-09-10 20:20:43"><i class="fas fa-history fa-fw"></i> 更新于 2022-09-10</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/blog/">blog</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="GO-语言"><a href="#GO-语言" class="headerlink" title="GO 语言"></a>GO 语言</h1><p>课程链接：</p>
<h2 id="Golang-环境安装"><a href="#Golang-环境安装" class="headerlink" title="Golang 环境安装"></a>Golang 环境安装</h2><p>链接[国内镜像]: <a href="https://studygolang.com/dl" target="_blank" rel="noopener">https://studygolang.com/dl</a></p>
<p>安装: 如果以 WINDOWS 版本为例 直接 next 即可 最后使用 go version 指令检查版本即可</p>
<p>​                      Liunx下使用以下解压指令，配置环境变量即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">解压命令</span><br><span class="line">sudo tsr -zxvf 包名.tar.gz -C &lt;指定路径[&#x2F;usr&#x2F;local]&gt;</span><br><span class="line">配置环境变量</span><br><span class="line">打开 ~&#x2F;.bashrc 配置以下环境变量</span><br><span class="line">export GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go      #GOROOT 表示源码包所在路径</span><br><span class="line">export GOPATH&#x3D;$HOME&#x2F;go			 #GOPATH 表示开发者Go 的项目默认路径</span><br><span class="line">export PATH&#x3D;$PATH:$GOPATH&#x2F;bin	 #将 bin 里面的可执行程序变为我们的指令</span><br><span class="line">更新一下文件</span><br><span class="line">source .bashrc</span><br><span class="line">查看环境变量</span><br><span class="line">go env</span><br></pre></td></tr></table></figure>

<p>IDE: Goland 或者 VsCode 或者 Vim + Go 插件</p>
<h2 id="Golang-课程序言"><a href="#Golang-课程序言" class="headerlink" title="Golang 课程序言"></a>Golang 课程序言</h2><h3 id="Golang的优势"><a href="#Golang的优势" class="headerlink" title="Golang的优势"></a>Golang的优势</h3><ol>
<li><p>极简单的部署方式</p>
<ol>
<li>可直接编译成机器码</li>
<li>不依赖其他库</li>
<li>直接运行可部署</li>
</ol>
</li>
<li><p>静态类型的语言</p>
<ol>
<li>编译的时候检查出来隐藏的大多数问题</li>
</ol>
</li>
<li><p>语言层面的并发</p>
<ol>
<li><p>天生的基因支持</p>
</li>
<li><p>充分的利用多核 </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">goFunc</span><span class="params">(i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"goroutine "</span>, i, <span class="string">" ..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> goFunc(i) <span class="comment">//开启一个并发协程</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    time.Sleep(time.Second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>强大的标准库</p>
<ol>
<li>runtime 系统调度机制</li>
<li>高校的 GC 垃圾回收</li>
<li>丰富的标准库</li>
</ol>
</li>
<li><p>简单易学</p>
<ol>
<li>25关键字</li>
<li>C 语言简洁基因 ， 内嵌C语法支持</li>
<li>面向对象特征（继承、多态、封装）</li>
<li>跨平台</li>
</ol>
</li>
</ol>
<h3 id="Golang的强项"><a href="#Golang的强项" class="headerlink" title="Golang的强项"></a>Golang的强项</h3><ol>
<li>云计算基础设施领域（docker、k8s）</li>
<li>基础后端软件（docker、k8s）</li>
<li>微服务（go-kit）</li>
<li>互联网基础设施（以太坊、hyperledger）</li>
</ol>
<h3 id="Golang的明星作品（成就）"><a href="#Golang的明星作品（成就）" class="headerlink" title="Golang的明星作品（成就）"></a>Golang的明星作品（成就）</h3><p>​    Docker Kubernetes</p>
<h3 id="Golang-的不足"><a href="#Golang-的不足" class="headerlink" title="Golang 的不足"></a>Golang 的不足</h3><ol>
<li>包管理,大部分过都在 GitHub 上</li>
<li>无泛化类型（1.14）</li>
<li>所有的 Exception 都用 Error来处理(比较有争议)</li>
<li>对 C 的降级处理, 并非无缝, 没有 C 降级到 asm (汇编) 那么完美(序列化问题)</li>
</ol>
<h2 id="Golang-语法新奇"><a href="#Golang-语法新奇" class="headerlink" title="Golang 语法新奇"></a>Golang 语法新奇</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="从一个main函数-初见-Go-语法特性"><a href="#从一个main函数-初见-Go-语法特性" class="headerlink" title="从一个main函数 初见 Go 语法特性"></a>从一个main函数 初见 Go 语法特性</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main <span class="comment">//当前程序的包名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">import "fmt"</span></span><br><span class="line"><span class="comment">import "time"</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main 函数 函数的'&#123;'必须同行</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">" Hello Go!"</span>)</span><br><span class="line">	time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="常见的四种变量声明方式与多变量声明方式"><a href="#常见的四种变量声明方式与多变量声明方式" class="headerlink" title="常见的四种变量声明方式与多变量声明方式"></a>常见的四种变量声明方式与多变量声明方式</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//声明全局变量 方法一、方法二、方法三可以的</span></span><br><span class="line"><span class="keyword">var</span> gA <span class="keyword">int</span> = <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> gB = <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//用方法四来声明全局变量</span></span><br><span class="line"><span class="comment">// := 只能够在 函数体内来声明</span></span><br><span class="line"><span class="comment">//gC := 200</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//方法一: 声明一个变量 默认的值是0</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">int</span></span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">	fmt.Printf(<span class="string">"type of a = %T\n"</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//方法二: 声明一个变量，初始化一个值</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">int</span> = <span class="number">100</span></span><br><span class="line">	fmt.Println(<span class="string">"b = "</span>, b)</span><br><span class="line">	fmt.Printf(<span class="string">"type of b = %T\n"</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> bb <span class="keyword">string</span> = <span class="string">"abcd"</span></span><br><span class="line">	fmt.Printf(<span class="string">"bb = %s,type of bb = %T\n"</span>, bb, bb)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//方法三:在初始化的时候，可以省略数据类型，通过值自动确定类型</span></span><br><span class="line">	<span class="keyword">var</span> c = <span class="number">100</span></span><br><span class="line">	fmt.Println(<span class="string">"c = "</span>, c)</span><br><span class="line">	fmt.Printf(<span class="string">"type of c = %T\n"</span>, c)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> cc = <span class="string">"abcd"</span></span><br><span class="line">	fmt.Printf(<span class="string">"cc = %s,type of cc = %T\n"</span>, cc, cc)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//方法四:（常见的方法） 省略 var 关键字，直接自动匹配</span></span><br><span class="line">	e := <span class="number">100</span></span><br><span class="line">	fmt.Println(<span class="string">"e = "</span>, e)</span><br><span class="line">	fmt.Printf(<span class="string">"type of e = %T\n"</span>, e)</span><br><span class="line"></span><br><span class="line">	f := <span class="string">"abcd"</span></span><br><span class="line">	fmt.Println(<span class="string">"f = "</span>, f)</span><br><span class="line">	fmt.Printf(<span class="string">"type of f = %T\n"</span>, f)</span><br><span class="line"></span><br><span class="line">	g := <span class="number">3.14</span></span><br><span class="line">	fmt.Println(<span class="string">"g = "</span>, g)</span><br><span class="line">	fmt.Printf(<span class="string">"type of g = %T\n"</span>, g)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// =====</span></span><br><span class="line">	fmt.Println(<span class="string">"gA = "</span>, gA, <span class="string">"gB = "</span>, gB)</span><br><span class="line">	<span class="comment">// fmt.Println("gC = ", gC)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明多个变量</span></span><br><span class="line">	<span class="keyword">var</span> xx, yy <span class="keyword">int</span> = <span class="number">100</span>, <span class="number">200</span></span><br><span class="line">	fmt.Println(<span class="string">"xx = "</span>, xx, <span class="string">"yy = "</span>, yy)</span><br><span class="line">	<span class="keyword">var</span> kk, ll = <span class="string">"100"</span>, <span class="string">"SimulatedSakura"</span></span><br><span class="line">	fmt.Println(<span class="string">"kk = "</span>, kk, <span class="string">"ll = "</span>, ll)</span><br><span class="line">	oo, pp := <span class="number">100</span>, <span class="string">"ACID"</span></span><br><span class="line">	fmt.Println(<span class="string">"oo = "</span>, oo, <span class="string">"pp = "</span>, pp)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多行的多变量声明</span></span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		vv <span class="keyword">int</span>  = <span class="number">100</span></span><br><span class="line">		jj <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Println(<span class="string">"vv = "</span>, vv, <span class="string">"jj = "</span>, jj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="const-与-iota"><a href="#const-与-iota" class="headerlink" title="const 与 iota"></a>const 与 iota</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//const 来定义枚举类型</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	<span class="comment">//可以在const() 中添加一个关键字 iota,每行的iota都会累加1,第一行的 iota 的值为0</span></span><br><span class="line">	BEIJING  = <span class="literal">iota</span> <span class="comment">//iota = 0</span></span><br><span class="line">	SHANGHAI        <span class="comment">//iota = 1</span></span><br><span class="line">	SHENZHEN        <span class="comment">//iota = 2</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	a, b = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span> <span class="comment">// 1, 2</span></span><br><span class="line">	c, d                      <span class="comment">// 2, 3</span></span><br><span class="line">	e, f                      <span class="comment">// 3, 4</span></span><br><span class="line"></span><br><span class="line">	g, h = <span class="literal">iota</span> * <span class="number">2</span>, <span class="literal">iota</span> * <span class="number">3</span> <span class="comment">//6, 9</span></span><br><span class="line">	i, k                      <span class="comment">//8, 12</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//常量（只读）</span></span><br><span class="line">	<span class="keyword">const</span> length <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">"length = "</span>, length)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//length = 100 //常量是不可以修改的</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"BEIJING = "</span>, BEIJING)</span><br><span class="line">	fmt.Println(<span class="string">"SHANGHAI = "</span>, SHANGHAI)</span><br><span class="line">	fmt.Println(<span class="string">"SHENZHEN = "</span>, SHENZHEN)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a, <span class="string">"b = "</span>, b)</span><br><span class="line">	fmt.Println(<span class="string">"c = "</span>, c, <span class="string">"d = "</span>, d)</span><br><span class="line">	fmt.Println(<span class="string">"e = "</span>, e, <span class="string">"f = "</span>, f)</span><br><span class="line">	fmt.Println(<span class="string">"g = "</span>, g, <span class="string">"h = "</span>, h)</span><br><span class="line">	fmt.Println(<span class="string">"i = "</span>, i, <span class="string">"k = "</span>, k)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//iota 只能配合const() 一起使用, iota 只能在 const 中有累加效果</span></span><br><span class="line">	<span class="comment">// var a int = iota</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="多返回值"><a href="#多返回值" class="headerlink" title="多返回值"></a>多返回值</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(a <span class="keyword">string</span>, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">"b = "</span>, b)</span><br><span class="line">	c := <span class="number">100</span></span><br><span class="line">	<span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回多个返回值,匿名的</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo2</span><span class="params">(a <span class="keyword">string</span>, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">"b = "</span>, b)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">666</span>, <span class="number">777</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回多个返回值,有形参名称</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo3</span><span class="params">(a <span class="keyword">string</span>, b <span class="keyword">int</span>)</span> <span class="params">(r1 <span class="keyword">int</span>, r2 <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">"b = "</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//r1,r2 属于foo3的形参, 初始默认值是0</span></span><br><span class="line">	<span class="comment">//r1,r2 作用域是foo3 整个函数体的&#123;&#125;空间</span></span><br><span class="line">	fmt.Println(<span class="string">"r1 = "</span>, r1)</span><br><span class="line">	fmt.Println(<span class="string">"r2 = "</span>, r2)</span><br><span class="line">	<span class="comment">//给有名称的返回值变量赋值</span></span><br><span class="line">	r1 = <span class="number">1000</span></span><br><span class="line">	r2 = <span class="number">2000</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo4</span><span class="params">(a <span class="keyword">string</span>, b <span class="keyword">int</span>)</span> <span class="params">(r1, r2 <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">"b = "</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//给有名称的返回值变量赋值</span></span><br><span class="line">	r1 = <span class="number">1000</span></span><br><span class="line">	r2 = <span class="number">2000</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := f1(<span class="string">"abc"</span>, <span class="number">555</span>)</span><br><span class="line">	fmt.Println(<span class="string">"c = "</span>, c)</span><br><span class="line"></span><br><span class="line">	ret1, ret2 := foo2(<span class="string">"haha"</span>, <span class="number">999</span>)</span><br><span class="line">	fmt.Println(<span class="string">"ret1 = "</span>, ret1, <span class="string">"ret2 = "</span>, ret2)</span><br><span class="line"></span><br><span class="line">	ret1, ret2 = foo3(<span class="string">"haha"</span>, <span class="number">333</span>)</span><br><span class="line">	fmt.Println(<span class="string">"ret1 = "</span>, ret1, <span class="string">"ret2 = "</span>, ret2)</span><br><span class="line"></span><br><span class="line">	ret1, ret2 = foo4(<span class="string">"haha"</span>, <span class="number">444</span>)</span><br><span class="line">	fmt.Println(<span class="string">"ret1 = "</span>, ret1, <span class="string">"ret2 = "</span>, ret2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="init函数与import导包"><a href="#init函数与import导包" class="headerlink" title="init函数与import导包"></a>init函数与import导包</h4><p>流程: (首字母大写的方法为对外开放的方法)</p>
<p><img src= "/img/loading.gif" data-src="https://s2.loli.net/2022/08/29/7rqNjUct6nB2IDR.png" alt="https://s2.loli.net/2022/08/29/7rqNjUct6nB2IDR.png"></p>
<h4 id="import-匿名及别名导包方式"><a href="#import-匿名及别名导包方式" class="headerlink" title="import 匿名及别名导包方式"></a>import 匿名及别名导包方式</h4><p>注意: 导包但是不使用是会报错的, 如果需要匿名导包使用init()方法，使用一下方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    _ <span class="string">"lib1"</span> <span class="comment">// 匿名导包</span></span><br><span class="line">	mylib2 <span class="string">"lib2"</span> <span class="comment">//别名导包</span></span><br><span class="line">    . <span class="string">"lib3"</span> <span class="comment">//可以直接使用方法, 不要轻易使用</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeValue</span><span class="params">(p *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	*p = <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	changeValue(&amp;a)</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(pa, pb *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> temp = *pa</span><br><span class="line">	*pa = *pb</span><br><span class="line">	*pb = temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a, <span class="string">"b = "</span>, b)</span><br><span class="line">	swap(&amp;a, &amp;b)</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a, <span class="string">"b = "</span>, b)</span><br><span class="line"></span><br><span class="line">	p := &amp;a</span><br><span class="line"></span><br><span class="line">	fmt.Println(&amp;a)</span><br><span class="line">	fmt.Println(p)</span><br><span class="line"></span><br><span class="line">	pp := &amp;p <span class="comment">//二级指针</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(&amp;p)</span><br><span class="line">	fmt.Println(pp)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="defer关键字-语句调用顺序"><a href="#defer关键字-语句调用顺序" class="headerlink" title="defer关键字 语句调用顺序"></a>defer关键字 语句调用顺序</h3><p>知识点一、defer的后入先出</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//写入defre关键字 堆栈的形势，所以先 2 后 1</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"main end1"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"main end2"</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"main::hello go 1"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"main::hello go 2"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>知识点二、defer 关键字 和return 关键字的执行顺序</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferFunc</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"defer func called..."</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnFunc</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"return func called..."</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnAndDefer</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> deferFunc()</span><br><span class="line">	<span class="keyword">return</span> returnFunc()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	returnAndDefer()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">执行结果</span></span><br><span class="line"><span class="comment">return func called...</span></span><br><span class="line"><span class="comment">defer func called...</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="数组与动态数组（切片-slice）"><a href="#数组与动态数组（切片-slice）" class="headerlink" title="数组与动态数组（切片 slice）"></a>数组与动态数组（切片 slice）</h3><h4 id="常规数组"><a href="#常规数组" class="headerlink" title="常规数组"></a>常规数组</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//注意：此处的传参为值传递</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArrary</span><span class="params">(myArrary [10]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> myArrary &#123;</span><br><span class="line">		fmt.Println(<span class="string">"index = "</span>, index, <span class="string">"value = "</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//固定长度的数组</span></span><br><span class="line">	<span class="keyword">var</span> myArr1 [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">	myArr2 := [<span class="number">4</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	<span class="comment">// for i:=0;i &lt; 10;i++ &#123;</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(myArr1); i++ &#123;</span><br><span class="line">		fmt.Println(myArr1[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> myArr2 &#123;</span><br><span class="line">		fmt.Println(<span class="string">"index = "</span>, index, <span class="string">"value = "</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//查看数据类型</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of myArr1 = %T\n"</span>, myArr1)</span><br><span class="line">	fmt.Printf(<span class="string">"type of myArr2 = %T\n"</span>, myArr2)</span><br><span class="line"></span><br><span class="line">	printArrary(myArr1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="动态数组（切片-slice）"><a href="#动态数组（切片-slice）" class="headerlink" title="动态数组（切片 slice）"></a>动态数组（切片 slice）</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此处传递的类型为引用传递</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArrary</span><span class="params">(myArrary []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// _ 表示匿名的变量</span></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> myArrary &#123;</span><br><span class="line">		fmt.Println(<span class="string">"value = "</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	myArrary := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125; <span class="comment">//动态数组,切片 slice</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"type of myArrary is %T\n"</span>, myArrary)</span><br><span class="line">	printArrary(myArrary)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="slice-切片的-4-种声明定义方式"><a href="#slice-切片的-4-种声明定义方式" class="headerlink" title="slice 切片的 4 种声明定义方式"></a>slice 切片的 4 种声明定义方式</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//声明slice是一个切片，并且初始化,默认值为1、2、3</span></span><br><span class="line">	<span class="comment">//slice1 := []int&#123;1, 2, 3&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//声明slice1是一个切片, 但没有给slice 分配空间</span></span><br><span class="line">	<span class="keyword">var</span> slice1 []<span class="keyword">int</span></span><br><span class="line">	<span class="comment">// slice1 = make([]int, 3)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//声明slice1是一个切片, 同时分配三个空间,初始化是 0</span></span><br><span class="line">	<span class="comment">//var slice1 []int = make([]int, 3)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过 := 简写</span></span><br><span class="line">	<span class="comment">// slice1 := make([]int, 3)</span></span><br><span class="line">	<span class="comment">// slice1[0] = 100</span></span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, slice = %v\n"</span>, <span class="built_in">len</span>(slice1), slice1)</span><br><span class="line">	<span class="comment">//判断一个slice 是否为空的方式</span></span><br><span class="line">	<span class="keyword">if</span> slice1 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"slice1 是一个空切片"</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"slice1 是一个非空切片"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="slice-切片追加与截取"><a href="#slice-切片追加与截取" class="headerlink" title="slice 切片追加与截取"></a>slice 切片追加与截取</h4><h5 id="追加"><a href="#追加" class="headerlink" title="追加:"></a>追加:</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	nums := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">	<span class="comment">//长度 容量 具体</span></span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, cap = %d, slice = %v\n"</span>, <span class="built_in">len</span>(nums), <span class="built_in">cap</span>(nums), nums)</span><br><span class="line"></span><br><span class="line">	nums = <span class="built_in">append</span>(nums, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, cap = %d, slice = %v\n"</span>, <span class="built_in">len</span>(nums), <span class="built_in">cap</span>(nums), nums)</span><br><span class="line"></span><br><span class="line">	nums = <span class="built_in">append</span>(nums, <span class="number">1</span>)</span><br><span class="line">	nums = <span class="built_in">append</span>(nums, <span class="number">1</span>)</span><br><span class="line">	nums = <span class="built_in">append</span>(nums, <span class="number">1</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, cap = %d, slice = %v\n"</span>, <span class="built_in">len</span>(nums), <span class="built_in">cap</span>(nums), nums)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="截取"><a href="#截取" class="headerlink" title="截取:"></a>截取:</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	<span class="comment">//与 Python 相同,左闭右开,冒号分割, 可写可不写</span></span><br><span class="line">	s1 := s[<span class="number">0</span>:<span class="number">1</span>] <span class="comment">//注意这里的地址没有开辟新的空间，属于潜拷贝</span></span><br><span class="line">	fmt.Printf(<span class="string">"s1 = %v"</span>, s1)</span><br><span class="line"></span><br><span class="line">	s[<span class="number">0</span>] = <span class="number">4</span></span><br><span class="line">	fmt.Printf(<span class="string">"\ns1 = %v"</span>, s1)</span><br><span class="line"></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	<span class="built_in">copy</span>(s2, s) <span class="comment">//将s的内容copy给s2,开辟了新的内存空间,与原切片已无关系</span></span><br><span class="line">	fmt.Printf(<span class="string">"\ns2 = %v"</span>, s2)</span><br><span class="line"></span><br><span class="line">	s[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">	fmt.Printf(<span class="string">"\ns2 = %v"</span>, s2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><h4 id="声明方式"><a href="#声明方式" class="headerlink" title="声明方式"></a>声明方式</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//声明myMap1 是一种map类型 key是string, value 是string</span></span><br><span class="line">	<span class="keyword">var</span> myMap1 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">	<span class="keyword">if</span> myMap1 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"myMap1 是一个空map"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//在使用map前需要先给map分配数据空间</span></span><br><span class="line">	myMap1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">	myMap1[<span class="string">"1"</span>] = <span class="string">"aa"</span></span><br><span class="line">	myMap1[<span class="string">"2"</span>] = <span class="string">"bb"</span></span><br><span class="line">	myMap1[<span class="string">"3"</span>] = <span class="string">"cc"</span></span><br><span class="line">	fmt.Println(myMap1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//第二种声明方式</span></span><br><span class="line">	myMap2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>)</span><br><span class="line">	myMap2[<span class="number">1</span>] = <span class="string">"aa"</span></span><br><span class="line">	myMap2[<span class="number">2</span>] = <span class="string">"bb"</span></span><br><span class="line">	myMap2[<span class="number">3</span>] = <span class="string">"cc"</span></span><br><span class="line">	fmt.Println(myMap2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//第三种声明方式</span></span><br><span class="line">	myMap3 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">		<span class="string">"one"</span>:   <span class="string">"aa"</span>,</span><br><span class="line">		<span class="string">"two"</span>:   <span class="string">"bb"</span>,</span><br><span class="line">		<span class="string">"three"</span>: <span class="string">"cc"</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(myMap3)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="map的使用方式"><a href="#map的使用方式" class="headerlink" title="map的使用方式"></a>map的使用方式</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printMap</span><span class="params">(cityMap <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">//这是一个引用传递</span></span><br><span class="line">	<span class="keyword">for</span> key, value := <span class="keyword">range</span> cityMap &#123;</span><br><span class="line">		fmt.Println(<span class="string">"key = "</span>, key, <span class="string">"value = "</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	cityMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">	cityMap[<span class="string">"China"</span>] = <span class="string">"BEIJING"</span></span><br><span class="line">	cityMap[<span class="string">"Japan"</span>] = <span class="string">"TOKYO"</span></span><br><span class="line">	cityMap[<span class="string">"USA"</span>] = <span class="string">"NEWYORK"</span></span><br><span class="line">	<span class="keyword">for</span> key, value := <span class="keyword">range</span> cityMap &#123;</span><br><span class="line">		fmt.Println(<span class="string">"key = "</span>, key, <span class="string">"value = "</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//删除</span></span><br><span class="line">	<span class="built_in">delete</span>(cityMap, <span class="string">"China"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"=================="</span>)</span><br><span class="line">	<span class="keyword">for</span> key, value := <span class="keyword">range</span> cityMap &#123;</span><br><span class="line">		fmt.Println(<span class="string">"key = "</span>, key, <span class="string">"value = "</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"=================="</span>)</span><br><span class="line">	<span class="comment">//函数遍历</span></span><br><span class="line">	printMap(cityMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h3><h4 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//声明一种行的数据类型 myint , 是int的一个别名</span></span><br><span class="line"><span class="keyword">type</span> myint <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个结构体</span></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">	title <span class="keyword">string</span></span><br><span class="line">	auth  <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a myint = <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">	fmt.Printf(<span class="string">"type of a = %T\n"</span>, a)</span><br><span class="line">	<span class="keyword">var</span> book1 Book</span><br><span class="line">	book1.title = <span class="string">"Golang"</span></span><br><span class="line">	book1.auth = <span class="string">"xixi"</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"%v\n"</span>, book1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="面向对象类的表示和封装"><a href="#面向对象类的表示和封装" class="headerlink" title="面向对象类的表示和封装"></a>面向对象类的表示和封装</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Hero <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Ad    <span class="keyword">int</span></span><br><span class="line">	Level <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this Hero)</span> <span class="title">GetName</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Name = "</span>, this.Name)</span><br><span class="line">	<span class="keyword">return</span> this.Name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this Hero)</span> <span class="title">SetName</span><span class="params">(newName <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// this 对象是一个拷贝,并非是引用,加个*就行	</span></span><br><span class="line">	this.Name = newName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	hero := Hero&#123;Name: <span class="string">"zhang3"</span>, Ad: <span class="number">100</span>, Level: <span class="number">1</span>&#125;</span><br><span class="line">	hero.GetName()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Golang中面向对象继承"><a href="#Golang中面向对象继承" class="headerlink" title="Golang中面向对象继承"></a>Golang中面向对象继承</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Human <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	sex  <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Human)</span> <span class="title">Eat</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Human.eat()..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Human)</span> <span class="title">Walk</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Human.Walk()..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> SuperMan <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human <span class="comment">//SuperMan 继承了Human类的方法</span></span><br><span class="line">	level <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重定义父类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span> <span class="title">Eat</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"SuperMan.Eat()..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span> <span class="title">Fly</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"SuperMan.Fly()..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span> <span class="title">Print</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%v\n"</span>, this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	h := Human&#123;<span class="string">"zhang3"</span>, <span class="string">"female"</span>&#125;</span><br><span class="line">	h.Eat()</span><br><span class="line">	h.Walk()</span><br><span class="line">	sh := SuperMan&#123;Human&#123;name: <span class="string">"li4"</span>, sex: <span class="string">"male"</span>&#125;, <span class="number">88</span>&#125;</span><br><span class="line">	sh.Walk()</span><br><span class="line">	sh.Eat()</span><br><span class="line">	sh.Fly()</span><br><span class="line">	sh.Print()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="多态（接口-interface）"><a href="#多态（接口-interface）" class="headerlink" title="多态（接口 interface）"></a>多态（接口 interface）</h4><h4 id="接口得基础用法"><a href="#接口得基础用法" class="headerlink" title="接口得基础用法"></a>接口得基础用法</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//本质上是一个指针</span></span><br><span class="line"><span class="keyword">type</span> AnimalIF <span class="keyword">interface</span> &#123;</span><br><span class="line">	Sleep()           <span class="comment">//睡觉</span></span><br><span class="line">	GetColor() <span class="keyword">string</span> <span class="comment">//获取动物的颜色</span></span><br><span class="line">	GetType() <span class="keyword">string</span>  <span class="comment">//获取动物的种类</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体的类</span></span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">	color <span class="keyword">string</span> <span class="comment">//颜色</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span> <span class="title">Sleep</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"呼呼喵"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span> <span class="title">GetColor</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span> <span class="title">GetType</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"Cat"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">	color <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span> <span class="title">Sleep</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"呼呼汪"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span> <span class="title">GetColor</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span> <span class="title">GetType</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"Dog"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showAnimal</span><span class="params">(animal AnimalIF)</span></span> &#123;</span><br><span class="line">	animal.Sleep() <span class="comment">//多态</span></span><br><span class="line">	fmt.Println(<span class="string">"color = "</span>, animal.GetColor())</span><br><span class="line">	fmt.Println(<span class="string">"type = "</span>, animal.GetType())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		var animal AnimalIF //接口的数据类型, 父类指正</span></span><br><span class="line"><span class="comment">		animal = &amp;Cat&#123;"Green"&#125;</span></span><br><span class="line"><span class="comment">		animal.Sleep() //调用的是Cat的sleep方法</span></span><br><span class="line"><span class="comment">		animal = &amp;Dog&#123;"Yellow"&#125;</span></span><br><span class="line"><span class="comment">		animal.Sleep() //调用的是Dog的sleep方法</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	cat := Cat&#123;<span class="string">"Blue"</span>&#125;</span><br><span class="line">	dog := Dog&#123;<span class="string">"Yellow"</span>&#125;</span><br><span class="line">	showAnimal(&amp;cat)</span><br><span class="line">	showAnimal(&amp;dog)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="空接口万能类型与类型断言机制"><a href="#空接口万能类型与类型断言机制" class="headerlink" title="空接口万能类型与类型断言机制"></a>空接口万能类型与类型断言机制</h4><p>空接口 interface{} 可以代表一个万能数据类型 , 并且为其提供了断言机制来判断底层数据类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//interface&#123;&#125; 是万能数据类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc</span><span class="params">(arg <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"myFunc is called..."</span>)</span><br><span class="line">	fmt.Println(arg)</span><br><span class="line">	fmt.Printf(<span class="string">"type of arg is %T\n"</span>, arg)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//interface&#123;&#125; 该如何区分 此时引用的底层数据类型</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//给 interface&#123;&#125; 提供了 "类型断言" 的机制</span></span><br><span class="line">	value, ok := arg.(<span class="keyword">string</span>)</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		fmt.Println(<span class="string">"arg is not string type"</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"arg is string type, value is "</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">	auth <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	book := Book&#123;<span class="string">"SimulatedSakura"</span>&#125;</span><br><span class="line">	myFunc(book)</span><br><span class="line">	myFunc(<span class="number">100</span>)</span><br><span class="line">	myFunc(<span class="string">"xixihaha"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><h4 id="为什么断言可以进行呢，这得看-go-语言的内部变量构造："><a href="#为什么断言可以进行呢，这得看-go-语言的内部变量构造：" class="headerlink" title="为什么断言可以进行呢，这得看 go 语言的内部变量构造："></a>为什么断言可以进行呢，这得看 go 语言的内部变量构造：</h4><p><img src= "/img/loading.gif" data-src="https://s2.loli.net/2022/09/01/lrpc6OuKPS4xLR1.png" alt="https://s2.loli.net/2022/09/01/lrpc6OuKPS4xLR1.png"></p>
<h4 id="变量的pair可以从以下两个例子看出来"><a href="#变量的pair可以从以下两个例子看出来" class="headerlink" title="变量的pair可以从以下两个例子看出来"></a>变量的pair可以从以下两个例子看出来</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//pair&lt;static type:string, value:"simulatedsakura"&gt;</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">string</span> = <span class="string">"simulatedsakura"</span></span><br><span class="line">	<span class="keyword">var</span> allType <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//pair&lt;static type:string, value:"simulatedsakura"&gt;</span></span><br><span class="line">	allType = a</span><br><span class="line"></span><br><span class="line">	str, _ := allType.(<span class="keyword">string</span>)</span><br><span class="line">	fmt.Println(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">	ReadBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">	WriteBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体类型</span></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Book)</span> <span class="title">ReadBook</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Read a Book"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Book)</span> <span class="title">WriteBook</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Write a Book"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//b: pair&lt;type:Book, value: book&#123;&#125;地址&gt;</span></span><br><span class="line">	b := &amp;Book&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> r Reader</span><br><span class="line">	r = b</span><br><span class="line">	r.ReadBook()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//说到底就是内部pair没变所以可以断言</span></span><br><span class="line">	<span class="keyword">var</span> w Writer</span><br><span class="line">	w = r.(Writer)</span><br><span class="line">	w.WriteBook()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="反射与-reflect-机制用法"><a href="#反射与-reflect-机制用法" class="headerlink" title="反射与 reflect 机制用法"></a>反射与 reflect 机制用法</h4><p>reflect 包里的两个方法:</p>
<p>ValueOf 用来获取输入参数接口中数据的值，如果接口为空则返回0</p>
<p>TypeOf 字面意思，空返回nil</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"reflect"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">refectNum</span><span class="params">(arg <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"type : "</span>, reflect.TypeOf(arg))</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"value : "</span>, reflect.ValueOf(arg))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> num <span class="keyword">float64</span> = <span class="number">1.2345</span></span><br><span class="line">	refectNum(num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"reflect"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id   <span class="keyword">int</span></span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this User)</span> <span class="title">Call</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"user is called .."</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%v\n"</span>, this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	user := User&#123;<span class="number">1</span>, <span class="string">"simulatedsakura"</span>, <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line">	DoFiledAndMethod(user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoFiledAndMethod</span><span class="params">(input <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="comment">//获取input的type</span></span><br><span class="line">	inputType := reflect.TypeOf(input)</span><br><span class="line">	fmt.Println(<span class="string">"inputType is :"</span>, inputType.Name())</span><br><span class="line"></span><br><span class="line">	<span class="comment">//获取input的value</span></span><br><span class="line">	inputValue := reflect.ValueOf(input)</span><br><span class="line">	fmt.Println(<span class="string">"inputValue is:"</span>, inputValue)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过type 获取里面的字段</span></span><br><span class="line">	<span class="comment">//1. 获取interface的reflect.Type，通过Type得到NumField ,进行遍历</span></span><br><span class="line">	<span class="comment">//2. 得到每个field，数据类型</span></span><br><span class="line">	<span class="comment">//3. 通过filed有一个Interface()方法等到 对应的value</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; inputType.NumField(); i++ &#123;</span><br><span class="line">		field := inputType.Field(i)</span><br><span class="line">		value := inputValue.Field(i).Interface()</span><br><span class="line"></span><br><span class="line">		fmt.Printf(<span class="string">"%s: %v = %v\n"</span>, field.Name, field.Type, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过type 获取里面的方法,调用</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; inputType.NumMethod(); i++ &#123;</span><br><span class="line">		m := inputType.Method(i)</span><br><span class="line">		fmt.Printf(<span class="string">"%s: %v\n"</span>, m.Name, m.Type)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="结构体标签"><a href="#结构体标签" class="headerlink" title="结构体标签"></a>结构体标签</h4><h5 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"reflect"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> resume <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span> <span class="string">`info:"name" doc:"我的名字"`</span></span><br><span class="line">	Sex  <span class="keyword">string</span> <span class="string">`info:"sex"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findTag</span><span class="params">(str <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	t := reflect.TypeOf(str).Elem()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; t.NumField(); i++ &#123;</span><br><span class="line">		taginfo := t.Field(i).Tag.Get(<span class="string">"info"</span>)</span><br><span class="line">		tagdoc := t.Field(i).Tag.Get(<span class="string">"doc"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"info: "</span>, taginfo, <span class="string">" doc: "</span>, tagdoc)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> re resume</span><br><span class="line"></span><br><span class="line">	findTag(&amp;re)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="在json中的应用"><a href="#在json中的应用" class="headerlink" title="在json中的应用"></a>在json中的应用</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"encoding/json"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Movie <span class="keyword">struct</span> &#123;</span><br><span class="line">	Title  <span class="keyword">string</span>   <span class="string">`json:"title"`</span></span><br><span class="line">	Year   <span class="keyword">int</span>      <span class="string">`json:"year"`</span></span><br><span class="line">	Price  <span class="keyword">int</span>      <span class="string">`json:"rmb"`</span></span><br><span class="line">	Actors []<span class="keyword">string</span> <span class="string">`json:"actors"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	movie := Movie&#123;<span class="string">"喜剧之王"</span>, <span class="number">2000</span>, <span class="number">10</span>, []<span class="keyword">string</span>&#123;<span class="string">"xingye"</span>, <span class="string">"zhangbozhi"</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//编码的过程  结构体---&gt; json</span></span><br><span class="line">	jsonStr, err := json.Marshal(movie)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"json marshal error"</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"jsonStr = %s\n"</span>, jsonStr)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//解码的过程 jsonstr ---&gt; 结构体</span></span><br><span class="line">	<span class="comment">//jsonStr = &#123;"title":"喜剧之王","year":2000,"rmb":10,"actors":["xingye","zhangbozhi"]&#125;</span></span><br><span class="line">	myMovie := Movie&#123;&#125;</span><br><span class="line">	err = json.Unmarshal(jsonStr, &amp;myMovie)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"json unmarshal error "</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"%v\n"</span>, myMovie)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Golang-高级"><a href="#Golang-高级" class="headerlink" title="Golang 高级"></a>Golang 高级</h2><h3 id="Goroutine"><a href="#Goroutine" class="headerlink" title="Goroutine"></a>Goroutine</h3><h4 id="一、线程基础"><a href="#一、线程基础" class="headerlink" title="一、线程基础"></a>一、线程基础</h4><p>​        和 JAVA 差不多，概念自行理解，另外线程之间存在一个切换的花费是需要优化的地方</p>
<p>​        多线程随着同步竞争（如 锁、竞争资源冲突等）使得开发设计变得越来越复杂，高消耗调度CPU</p>
<p>​        进程占用约 虚拟内存4GB（32bit OS）</p>
<p>​        线程占用内存 约4MB</p>
<p>​        高内存占用</p>
<h4 id="二、协程的由来"><a href="#二、协程的由来" class="headerlink" title="二、协程的由来"></a>二、协程的由来</h4><p><img src= "/img/loading.gif" data-src="D:%5Cblog%5Chexo-blog-lionkk%5Csource_posts%5CGo%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets%5CAeVcuURaFW2v7zr.png" alt="https://s2.loli.net/2022/09/01/AeVcuURaFW2v7zr.png"></p>
<p>不妨将一个线程划分为两个部分，一个称作内部空间，CPU可视，另外一个称作用户空间，我们的业务逻辑在这里实现，那么这样的优势在哪里呢？这里就可以引出协程调度器的概念了，见下图</p>
<p><img src= "/img/loading.gif" data-src="https://s2.loli.net/2022/09/01/1a7rOeDBjoPufUL.png" alt="https://s2.loli.net/2022/09/01/1a7rOeDBjoPufUL.png"></p>
<p>显然这就解决了，CPU高消耗的问题，称之为N:1的协程关系，存在一个弊端，因为协程调度器是轮询的机制，如果一个协程阻塞会造成下一个协程的问题，见下图</p>
<p><img src= "/img/loading.gif" data-src="https://s2.loli.net/2022/09/01/ReEuG1yxB6Wh45q.png" alt="https://s2.loli.net/2022/09/01/ReEuG1yxB6Wh45q.png"></p>
<p>但是如果使用的是1:1的模型的话，很明显协程的创建、删除和切换代价都是由CPU完成的，那么就显得昂贵了，那么很容易就可以想到让多个线程通过线程协调器来管理多个协程的模型</p>
<p><img src= "/img/loading.gif" data-src="https://s2.loli.net/2022/09/01/cQAh2NSijqUlrR8.png" alt="https://s2.loli.net/2022/09/01/cQAh2NSijqUlrR8.png"></p>
<h4 id="三、Golang-对协程的处理"><a href="#三、Golang-对协程的处理" class="headerlink" title="三、Golang 对协程的处理"></a>三、Golang 对协程的处理</h4><p>​        首先改名了，co-routine 改名成了 Goroutine</p>
<p>​        内存占用改为了几KB（可以大量）</p>
<p>​        灵活调度（可常切换）这就体现在 Golang 调度器的处理上了</p>
<h5 id="历史课"><a href="#历史课" class="headerlink" title="历史课:"></a>历史课:</h5><p><img src= "/img/loading.gif" data-src="https://s2.loli.net/2022/09/01/4YRhSr5TFG69L1f.png" alt="https://s2.loli.net/2022/09/01/4YRhSr5TFG69L1f.png"></p>
<h5 id="弊端"><a href="#弊端" class="headerlink" title="弊端:"></a>弊端:</h5><ol>
<li>创建、销毁、调度 G 都需要每个M获取锁，这就形成了激烈的锁竞争</li>
<li>M转移G会造成延迟和额外的系统负载</li>
<li>系统调用（CPU 在 M 之间的切换）导致繁琐的线程阻塞和取消阻塞操作增加了系统开销</li>
</ol>
<h5 id="GMP模型："><a href="#GMP模型：" class="headerlink" title="GMP模型："></a>GMP模型：</h5><p>​        <img src= "/img/loading.gif" data-src="https://s2.loli.net/2022/09/01/RPqaujxZH36CzTh.png" alt="https://s2.loli.net/2022/09/01/RPqaujxZH36CzTh.png"></p>
<h5 id="调度器的设计策略"><a href="#调度器的设计策略" class="headerlink" title="调度器的设计策略"></a>调度器的设计策略</h5><ol>
<li>复用线程<ol>
<li>work stealing 机制 无协程的线程会从有任务的P的队列的队尾偷取G进行工作</li>
<li>hand off 机制 一旦一个协程进入阻塞，会唤醒或者创建一个新的线程将阻塞的线程的P挂到新的线程上</li>
</ol>
</li>
<li>利用并行<ol>
<li>GOMAXPROCS 限定P的个数 = CPU核数 / 2</li>
</ol>
</li>
<li>抢占<ol>
<li>最多10ms的执行时间</li>
</ol>
</li>
<li>全局G队列</li>
</ol>
<h5 id="创建Goroutine"><a href="#创建Goroutine" class="headerlink" title="创建Goroutine"></a>创建Goroutine</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">"new Goroutine : i = %d\n"</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创建一个 go程 去执行 newTake() 流程</span></span><br><span class="line">	<span class="keyword">go</span> newTask()</span><br><span class="line">    	<span class="keyword">go</span> newTask()</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"A.defer"</span>)</span><br><span class="line">		<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> fmt.Println(<span class="string">"B.defer"</span>)</span><br><span class="line">			fmt.Println(<span class="string">"B"</span>)</span><br><span class="line">		&#125;()</span><br><span class="line">		fmt.Println(<span class="string">"A"</span>)</span><br><span class="line">	&#125;()</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">"main goroutine i = %d\n"</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">		<span class="keyword">if</span> i &gt; <span class="number">3</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"main goroutine finish"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Channel-两个Goroutine之间的通信方式"><a href="#Channel-两个Goroutine之间的通信方式" class="headerlink" title="Channel(两个Goroutine之间的通信方式)"></a>Channel(两个Goroutine之间的通信方式)</h3><h4 id="基本定义和使用"><a href="#基本定义和使用" class="headerlink" title="基本定义和使用"></a>基本定义和使用</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//定义一个channel</span></span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"goroutine 运行结束"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"goroutine 正在运行..."</span>)</span><br><span class="line"></span><br><span class="line">		c &lt;- <span class="number">666</span> <span class="comment">//将666发送给c</span></span><br><span class="line">	&#125;()</span><br><span class="line">	num := &lt;-c</span><br><span class="line">	fmt.Println(<span class="string">"num = "</span>, num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>channel本身是具有同步能力的，会自动阻塞两边的协程</p>
<p>channel 有缓冲与无缓冲同步问题（接力棒放不放在通道中的区别）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Println(<span class="string">"len(c) = "</span>, <span class="built_in">len</span>(c), <span class="string">"cap(c) = "</span>, <span class="built_in">cap</span>(c))</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"子go程结束"</span>)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">			fmt.Println(<span class="string">"子go程正在运行: len(c) = "</span>, <span class="built_in">len</span>(c), <span class="string">"cap(c) = "</span>, <span class="built_in">cap</span>(c))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">		num := &lt;-c</span><br><span class="line">		fmt.Println(<span class="string">"num = "</span>, num)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"main 结束"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="channel-的关闭"><a href="#channel-的关闭" class="headerlink" title="channel 的关闭"></a>channel 的关闭</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">            <span class="comment">//如果向已经关闭的channel中发送数据  ，会报panic</span></span><br><span class="line">            <span class="comment">//close(c)</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//close 可以关闭一个channel, 不关闭会出现死锁的问题</span></span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//ok如果为t表示chan没有关闭</span></span><br><span class="line">		<span class="keyword">if</span> data, ok := &lt;-c; ok &#123;</span><br><span class="line">			fmt.Println(data)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"Main Finished..."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="channel-与-range"><a href="#channel-与-range" class="headerlink" title="channel 与 range"></a>channel 与 range</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">            <span class="comment">//如果向已经关闭的channel中发送数据  ，会报panic</span></span><br><span class="line">            <span class="comment">//close(c)</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//close 可以关闭一个channel, 不关闭会出现死锁的问题</span></span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;()</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//可以使用range来迭代不断操作channel</span></span><br><span class="line">    <span class="keyword">for</span> data := <span class="keyword">range</span> c&#123;</span><br><span class="line">        fmt.Println(data)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	fmt.Println(<span class="string">"Main Finished..."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="channel-与-select"><a href="#channel-与-select" class="headerlink" title="channel 与 select"></a>channel 与 select</h4><p>select具有多路channel的监控状态功能</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacii</span><span class="params">(c, quit <span class="keyword">chan</span> <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x, y := <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> c &lt;- x:</span><br><span class="line">			x, y = x+y, x</span><br><span class="line">		<span class="keyword">case</span> &lt;-quit:</span><br><span class="line">			fmt.Println(<span class="string">"quit"</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">	quit := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">6</span>; i++ &#123;</span><br><span class="line">			fmt.Println(&lt;-c)</span><br><span class="line">		&#125;</span><br><span class="line">		quit &lt;- <span class="number">0</span></span><br><span class="line">	&#125;()</span><br><span class="line">	fibonacii(c, quit)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Go-Modules-模块管理"><a href="#Go-Modules-模块管理" class="headerlink" title="Go Modules 模块管理"></a>Go Modules 模块管理</h2><h3 id="GOPATH-工作模式的弊端"><a href="#GOPATH-工作模式的弊端" class="headerlink" title="GOPATH 工作模式的弊端"></a>GOPATH 工作模式的弊端</h3><ul>
<li>没有版本控制的概念</li>
<li>无法同步一致第三方版本号</li>
<li>无法指定当前项目引用的第三方版本号</li>
</ul>
<h3 id="Go-Modules-模式基础环境说明"><a href="#Go-Modules-模式基础环境说明" class="headerlink" title="Go Modules 模式基础环境说明"></a>Go Modules 模式基础环境说明</h3><p>一些环境变量:</p>
<ol>
<li>GO111MODULE  </li>
<li>GOPROXY</li>
<li>GOSUMDB</li>
<li>GONOPROXY</li>
<li>GONOSUMDB</li>
<li>GOPRITATE</li>
</ol>
<p>可以通过go env 查看</p>
<p>通过 go env -w 配置</p>
<h3 id="Go-Modules初始化项目"><a href="#Go-Modules初始化项目" class="headerlink" title="Go Modules初始化项目"></a>Go Modules初始化项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">go mod init example.com&#x2F;simulatedsakura&#x2F;modules_test&#x2F;</span><br><span class="line">创建.go文件</span><br><span class="line">使用go get 获取相关依赖</span><br><span class="line">替换版本</span><br><span class="line">go mod edit -replace&#x3D;&quot;老版本&quot;&#x3D;&quot;新版本&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Golang-即时通讯系统"><a href="#Golang-即时通讯系统" class="headerlink" title="Golang 即时通讯系统"></a>Golang 即时通讯系统</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><h4 id="server-go"><a href="#server-go" class="headerlink" title="server.go"></a>server.go</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"io"</span></span><br><span class="line">	<span class="string">"net"</span></span><br><span class="line">	<span class="string">"sync"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> &#123;</span><br><span class="line">	Ip   <span class="keyword">string</span></span><br><span class="line">	Port <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//在线用户的列表</span></span><br><span class="line">	OnlineMap <span class="keyword">map</span>[<span class="keyword">string</span>]*User</span><br><span class="line">	mapLock   sync.RWMutex</span><br><span class="line"></span><br><span class="line">	<span class="comment">//消息广播的channel</span></span><br><span class="line">	Message <span class="keyword">chan</span> <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个server的接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewServer</span><span class="params">(ip <span class="keyword">string</span>, port <span class="keyword">int</span>)</span> *<span class="title">Server</span></span> &#123;</span><br><span class="line">	server := &amp;Server&#123;</span><br><span class="line">		Ip:        ip,</span><br><span class="line">		Port:      port,</span><br><span class="line">		OnlineMap: <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]*User),</span><br><span class="line">		Message:   <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>),</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> server</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听Message广播消息的goroutine,一旦有消息就发送给全部的在线User</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Server)</span> <span class="title">ListenMessager</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		msg := &lt;-this.Message</span><br><span class="line">		<span class="comment">//将msg发送给全部的在线User</span></span><br><span class="line">		this.mapLock.Lock()</span><br><span class="line">		<span class="keyword">for</span> _, cli := <span class="keyword">range</span> this.OnlineMap &#123;</span><br><span class="line">			cli.C &lt;- msg</span><br><span class="line">		&#125;</span><br><span class="line">		this.mapLock.Unlock()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 广播消息的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Server)</span> <span class="title">BroadCast</span><span class="params">(user *User, msg <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	sendMsg := <span class="string">"["</span> + user.Addr + <span class="string">"]"</span> + user.Name + <span class="string">":"</span> + msg</span><br><span class="line"></span><br><span class="line">	this.Message &lt;- sendMsg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Server)</span> <span class="title">Handler</span><span class="params">(conn net.Conn)</span></span> &#123;</span><br><span class="line">	<span class="comment">//...当前链接的业务</span></span><br><span class="line">	<span class="comment">//fmt.Println("链接建立成功")</span></span><br><span class="line"></span><br><span class="line">	user := NewUser(conn, this)</span><br><span class="line"></span><br><span class="line">	user.Online()</span><br><span class="line">	<span class="comment">//监听用户是否活跃的channel</span></span><br><span class="line">	isLive := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//接受客户端发送的消息</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">4096</span>)</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			n, err := conn.Read(buf)</span><br><span class="line">			<span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">				user.Offline()</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &amp;&amp; err != io.EOF &#123;</span><br><span class="line">				fmt.Println(<span class="string">"Conn Read Err:"</span>, err)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//提取用户的消息(去除末尾的\n)</span></span><br><span class="line">			msg := <span class="keyword">string</span>(buf[:n<span class="number">-1</span>])</span><br><span class="line"></span><br><span class="line">			<span class="comment">//用户针对msg进行处理</span></span><br><span class="line">			user.DoMessage(msg)</span><br><span class="line"></span><br><span class="line">			<span class="comment">//代表当前用户是一个活跃的</span></span><br><span class="line">			isLive &lt;- <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//当前handler阻塞</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> &lt;-isLive:</span><br><span class="line">			<span class="comment">//当前用户是活跃的,应该重置定时器</span></span><br><span class="line">			<span class="comment">//不做任何事情,未来激活select,更新一下的计时器</span></span><br><span class="line">		<span class="keyword">case</span> &lt;-time.After(time.Second * <span class="number">300</span>):</span><br><span class="line">			<span class="comment">//已经超时</span></span><br><span class="line">			<span class="comment">//将当前的User强制的关闭</span></span><br><span class="line">			user.SendMsg(<span class="string">"你被提出了"</span>)</span><br><span class="line"></span><br><span class="line">			<span class="comment">//销毁用的资源</span></span><br><span class="line">			<span class="built_in">close</span>(user.C)</span><br><span class="line"></span><br><span class="line">			<span class="comment">//关闭连接</span></span><br><span class="line">			conn.Close()</span><br><span class="line"></span><br><span class="line">			<span class="comment">//退出当前的Handler</span></span><br><span class="line">			<span class="keyword">return</span> <span class="comment">//runtime.Goexit()</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动服务器的接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Server)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//socket listen</span></span><br><span class="line">	listener, err := net.Listen(<span class="string">"tcp"</span>, fmt.Sprintf(<span class="string">"%s:%d"</span>, this.Ip, this.Port))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"net.Listen err: "</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//close listen socket</span></span><br><span class="line">	<span class="keyword">defer</span> listener.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//启动监听Message的Goroutine</span></span><br><span class="line">	<span class="keyword">go</span> this.ListenMessager()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//accept</span></span><br><span class="line">		conn, err := listener.Accept()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"listener accept err: "</span>, err)</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//do handler</span></span><br><span class="line">		<span class="keyword">go</span> this.Handler(conn)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="user-go"><a href="#user-go" class="headerlink" title="user.go"></a>user.go</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"net"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Addr <span class="keyword">string</span></span><br><span class="line">	C    <span class="keyword">chan</span> <span class="keyword">string</span></span><br><span class="line">	conn net.Conn</span><br><span class="line"></span><br><span class="line">	server *Server</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个用户的API</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewUser</span><span class="params">(conn net.Conn, server *Server)</span> *<span class="title">User</span></span> &#123;</span><br><span class="line">	userAddr := conn.RemoteAddr().String()</span><br><span class="line"></span><br><span class="line">	user := &amp;User&#123;</span><br><span class="line">		Name:   userAddr,</span><br><span class="line">		Addr:   userAddr,</span><br><span class="line">		C:      <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>),</span><br><span class="line">		conn:   conn,</span><br><span class="line">		server: server,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//启动监听当前 user channel的 goroutine</span></span><br><span class="line">	<span class="keyword">go</span> user.ListenMessage()</span><br><span class="line">	<span class="keyword">return</span> user</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户的上线业务</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *User)</span> <span class="title">Online</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//用户上线,将用户加入到OnlineMap中</span></span><br><span class="line">	this.server.mapLock.Lock()</span><br><span class="line">	this.server.OnlineMap[this.Name] = this</span><br><span class="line">	this.server.mapLock.Unlock()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//广播当前用户上线消息</span></span><br><span class="line">	this.server.BroadCast(this, <span class="string">"已上线"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户的下线业务</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *User)</span> <span class="title">Offline</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//用户下线,将用户移除到OnlineMap中</span></span><br><span class="line">	this.server.mapLock.Lock()</span><br><span class="line">	<span class="built_in">delete</span>(this.server.OnlineMap, this.Name)</span><br><span class="line">	this.server.mapLock.Unlock()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//广播当前用户上线消息</span></span><br><span class="line">	this.server.BroadCast(this, <span class="string">"已下线"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给当前User对应的客户端发送消息</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *User)</span> <span class="title">SendMsg</span><span class="params">(msg <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	this.conn.Write([]<span class="keyword">byte</span>(msg))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户处理消息的业务</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *User)</span> <span class="title">DoMessage</span><span class="params">(msg <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> msg == <span class="string">"who"</span> &#123;</span><br><span class="line">		<span class="comment">//查询当前在线用户都有哪些</span></span><br><span class="line">		this.server.mapLock.Lock()</span><br><span class="line">		<span class="keyword">for</span> _, user := <span class="keyword">range</span> this.server.OnlineMap &#123;</span><br><span class="line">			onlineMsg := <span class="string">"["</span> + user.Addr + <span class="string">"]"</span> + user.Name + <span class="string">": 在线...\n"</span></span><br><span class="line">			<span class="comment">//this.C &lt;- onlineMsg</span></span><br><span class="line">			this.SendMsg(onlineMsg)</span><br><span class="line">		&#125;</span><br><span class="line">		this.server.mapLock.Unlock()</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">len</span>(msg) &gt; <span class="number">7</span> &amp;&amp; msg[:<span class="number">7</span>] == <span class="string">"rename|"</span> &#123;</span><br><span class="line">		<span class="comment">//消息格式:rename|张三</span></span><br><span class="line">		newName := strings.Split(msg, <span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">		<span class="comment">//newName := msg[7:]</span></span><br><span class="line">		<span class="comment">//判断name是否已经存在</span></span><br><span class="line">		_, ok := this.server.OnlineMap[newName]</span><br><span class="line">		<span class="keyword">if</span> ok &#123;</span><br><span class="line">			this.SendMsg(<span class="string">"当前用户名被使用\n"</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			this.server.mapLock.Lock()</span><br><span class="line">			<span class="built_in">delete</span>(this.server.OnlineMap, this.Name)</span><br><span class="line">			this.server.OnlineMap[newName] = this</span><br><span class="line">			this.server.mapLock.Unlock()</span><br><span class="line">			this.Name = newName</span><br><span class="line">			this.SendMsg(<span class="string">"您已经修改用户名:"</span> + this.Name)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">len</span>(msg) &gt; <span class="number">4</span> &amp;&amp; msg[:<span class="number">3</span>] == <span class="string">"to|"</span> &#123;</span><br><span class="line">		<span class="comment">//消息格式: to|张三|消息内容</span></span><br><span class="line">		<span class="comment">//1 获取用户名</span></span><br><span class="line">		remoteName := strings.Split(msg, <span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">		<span class="keyword">if</span> remoteName == <span class="string">""</span> &#123;</span><br><span class="line">			this.SendMsg(<span class="string">"消息格式不正确,请使用\"to|&lt;username&gt;|&lt;msg&gt;\"格式。\n"</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//2 根据用户名找到对方的User对象</span></span><br><span class="line">		remoteUser, ok := this.server.OnlineMap[remoteName]</span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			this.SendMsg(<span class="string">"该用户不存在"</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3 获取消息内容,通过对方的User对象将消息内容发送过去</span></span><br><span class="line">		content := strings.Split(msg, <span class="string">"|"</span>)[<span class="number">2</span>]</span><br><span class="line">		<span class="keyword">if</span> content == <span class="string">""</span> &#123;</span><br><span class="line">			this.SendMsg(<span class="string">"消息内容不能为空"</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			remoteUser.SendMsg(this.Name + <span class="string">"对您说:"</span> + content)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		this.server.BroadCast(this, msg)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听当前User channel的方法,一旦有消息,就直接发送给对端客户端</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *User)</span> <span class="title">ListenMessage</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		msg := &lt;-this.C</span><br><span class="line">		this.conn.Write([]<span class="keyword">byte</span>(msg + <span class="string">"\n"</span>))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="main-go"><a href="#main-go" class="headerlink" title="main.go"></a>main.go</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	server := NewServer(<span class="string">"127.0.0.1"</span>, <span class="number">8888</span>)</span><br><span class="line">	server.Start()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><h4 id="client-go"><a href="#client-go" class="headerlink" title="client.go"></a>client.go</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"flag"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"io"</span></span><br><span class="line">	<span class="string">"net"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Client <span class="keyword">struct</span> &#123;</span><br><span class="line">	ServerIp   <span class="keyword">string</span></span><br><span class="line">	ServerPort <span class="keyword">int</span></span><br><span class="line">	Name       <span class="keyword">string</span></span><br><span class="line">	conn       net.Conn</span><br><span class="line">	flag       <span class="keyword">int</span> <span class="comment">//当前客户端的模式</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于处理server回应的消息。直接显示到标准输出即可</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(client *Client)</span> <span class="title">DealResponse</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//一旦client.conn有数据,直接copy到stdout输出上,永久监听</span></span><br><span class="line">	io.Copy(os.Stdout, client.conn)</span><br><span class="line">	<span class="comment">//等价于下面这一串代码</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		for &#123;</span></span><br><span class="line"><span class="comment">            buf := make([]byte, 100)</span></span><br><span class="line"><span class="comment">            client.conn.Read(buf)</span></span><br><span class="line"><span class="comment">            fmt.Println(string(buf))</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(client *Client)</span> <span class="title">menu</span><span class="params">()</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> flag <span class="keyword">int</span></span><br><span class="line">	fmt.Println(<span class="string">"1.公聊模式"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"2.私聊模式"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"3.修改用户名"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"0.退出"</span>)</span><br><span class="line">	fmt.Scanln(&amp;flag)</span><br><span class="line">	<span class="keyword">if</span> flag &gt;= <span class="number">0</span> &amp;&amp; flag &lt;= <span class="number">3</span> &#123;</span><br><span class="line">		client.flag = flag</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;请输入合法范围内的数字&lt;&lt;&lt;&lt;"</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> serverIp <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> serverPort <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ./client -ip 127.0.0.1</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	flag.StringVar(&amp;serverIp, <span class="string">"ip"</span>, <span class="string">"127.0.0.1"</span>, <span class="string">"设置服务器IP地址(默认是127.0.0.1)"</span>)</span><br><span class="line">	flag.IntVar(&amp;serverPort, <span class="string">"port"</span>, <span class="number">8888</span>, <span class="string">"设置服务器端口(默认是8888)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(client *Client)</span> <span class="title">UpdateName</span><span class="params">()</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;输入用户名"</span>)</span><br><span class="line">	fmt.Scanln(&amp;client.Name)</span><br><span class="line">	sendMsg := <span class="string">"rename|"</span> + client.Name + <span class="string">"\n"</span></span><br><span class="line">	_, err := client.conn.Write([]<span class="keyword">byte</span>(sendMsg))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"conn.Write err:"</span>, err)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(client *Client)</span> <span class="title">PublicChat</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//提示用户发送消息</span></span><br><span class="line">	<span class="keyword">var</span> chatMsg <span class="keyword">string</span></span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;请输入聊天内容,exit退出"</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Scanln(&amp;chatMsg)</span><br><span class="line">	<span class="keyword">for</span> chatMsg != <span class="string">"exit"</span> &#123;</span><br><span class="line">		<span class="comment">//发给服务器,只发送非空消息</span></span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">len</span>(chatMsg) != <span class="number">0</span> &#123;</span><br><span class="line">			sendMsg := chatMsg + <span class="string">"\n"</span></span><br><span class="line">			_, err := client.conn.Write([]<span class="keyword">byte</span>(sendMsg))</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				fmt.Println(<span class="string">"conn Write err:"</span>, err)</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		chatMsg = <span class="string">""</span></span><br><span class="line">		fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;请输入聊天内容,exit退出"</span>)</span><br><span class="line">		fmt.Scanln(&amp;chatMsg)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//发给服务器</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询在线用户</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(client *Client)</span> <span class="title">SelectUser</span><span class="params">()</span></span> &#123;</span><br><span class="line">	sendMsg := <span class="string">"who"</span></span><br><span class="line">	_, err := client.conn.Write([]<span class="keyword">byte</span>(sendMsg))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"conn Write err:"</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(client *Client)</span> <span class="title">PrivateChat</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//私聊模式</span></span><br><span class="line">	<span class="keyword">var</span> remoteName <span class="keyword">string</span></span><br><span class="line">	<span class="keyword">var</span> chatMsg <span class="keyword">string</span></span><br><span class="line">	client.SelectUser()</span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;请输入聊天对象[用户名],exit退出:"</span>)</span><br><span class="line">	fmt.Scanln(&amp;remoteName)</span><br><span class="line">	<span class="keyword">if</span> remoteName != <span class="string">"exit"</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;请输入消息内容,exit退出:"</span>)</span><br><span class="line">		fmt.Scanln(chatMsg)</span><br><span class="line">		<span class="keyword">for</span> chatMsg != <span class="string">"exit"</span> &#123;</span><br><span class="line">			<span class="comment">//发给服务器,只发送非空消息</span></span><br><span class="line">			<span class="keyword">if</span> <span class="built_in">len</span>(chatMsg) != <span class="number">0</span> &#123;</span><br><span class="line">				sendMsg := <span class="string">"to|"</span> + remoteName + <span class="string">"|"</span> + chatMsg + <span class="string">"\n\n"</span></span><br><span class="line">				_, err := client.conn.Write([]<span class="keyword">byte</span>(sendMsg))</span><br><span class="line">				<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">					fmt.Println(<span class="string">"conn Write err:"</span>, err)</span><br><span class="line">					<span class="keyword">break</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			chatMsg = <span class="string">""</span></span><br><span class="line">			fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;请输入聊天内容,exit退出"</span>)</span><br><span class="line">			fmt.Scanln(&amp;chatMsg)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		client.SelectUser()</span><br><span class="line">		fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;请输入聊天对象[用户名],exit退出:"</span>)</span><br><span class="line">		fmt.Scanln(&amp;remoteName)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(client *Client)</span> <span class="title">Run</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> client.flag != <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">for</span> client.menu() != <span class="literal">true</span> &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//根据不同的模式处理不同的业务</span></span><br><span class="line">		<span class="keyword">switch</span> client.flag &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="comment">//公聊模式</span></span><br><span class="line">			fmt.Println(<span class="string">"公聊模式"</span>)</span><br><span class="line">			client.PublicChat()</span><br><span class="line">			<span class="keyword">break</span> <span class="comment">// 默认其实存在break,可以不写</span></span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="comment">//私聊模式</span></span><br><span class="line">			fmt.Println(<span class="string">"私聊模式"</span>)</span><br><span class="line">			client.PrivateChat()</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="comment">//更新用户名</span></span><br><span class="line">			fmt.Println(<span class="string">"修改用户名模式"</span>)</span><br><span class="line">			client.UpdateName()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewClient</span><span class="params">(serverIp <span class="keyword">string</span>, serverPort <span class="keyword">int</span>)</span> *<span class="title">Client</span></span> &#123;</span><br><span class="line">	<span class="comment">//命令行解析</span></span><br><span class="line">	flag.Parse()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建客户端对象</span></span><br><span class="line">	client := &amp;Client&#123;</span><br><span class="line">		ServerIp:   serverIp,</span><br><span class="line">		ServerPort: serverPort,</span><br><span class="line">		flag:       <span class="number">999</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//链接server</span></span><br><span class="line">	conn, err := net.Dial(<span class="string">"tcp"</span>, fmt.Sprintf(<span class="string">"%s:%d"</span>, serverIp, serverPort))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"net.Dial error:"</span>, err)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	client.conn = conn</span><br><span class="line">	<span class="comment">//返回对象</span></span><br><span class="line">	<span class="keyword">return</span> client</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	client := NewClient(serverIp, serverPort)</span><br><span class="line">	<span class="keyword">if</span> client == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;&gt;链接服务器失败..."</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//单独开启一个goroutine来接收server的回执消息</span></span><br><span class="line">	<span class="keyword">go</span> client.DealResponse()</span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt;&gt;&gt;&gt;链接服务器成功"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//启动客户端业务</span></span><br><span class="line">	client.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">SimulatedSakura</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/posts/58401/">http://yoursite.com/posts/58401/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">SimulatedSakura</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0/">学习</a><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/09/10/vVYzpIRW4uwioGZ.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/1699/"><img class="prev-cover" data-src="https://s2.loli.net/2022/09/10/GgHnyoxVXWrEkhL.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Vim 相关</div></div></a></div><div class="next-post pull-right"><a href="/posts/41145/"><img class="next-cover" data-src="https://s2.loli.net/2022/09/10/ejUm7dWzXoBrM8H.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java线程学习</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/posts/1699/" title="Vim 相关"><img class="relatedPosts_cover" data-src="https://s2.loli.net/2022/09/10/GgHnyoxVXWrEkhL.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-31</div><div class="relatedPosts_title">Vim 相关</div></div></a></div><div class="relatedPosts_item"><a href="/posts/50862/" title="一点区块链"><img class="relatedPosts_cover" data-src="https://s2.loli.net/2022/09/10/s86OSoyDzRVqecH.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-05</div><div class="relatedPosts_title">一点区块链</div></div></a></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022  <i id="heartbeat" class="fa fas fa-heartbeat"></i> SimulatedSakura</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 4.2.0"></head></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/calendar.js"></script><script src="/js/languages.js"></script></body></html>